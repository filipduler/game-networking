TODO:
 - if an address causes too many errors stop processing their requests
 - remove old pending connections in update
 - set max outbound bandwidth
